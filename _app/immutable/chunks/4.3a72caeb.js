import{s as le,n as de,o as ue,g as fe}from"./scheduler.16562e1f.js";import{S as me,i as ge,g as q,s as W,r as pe,h as K,I as F,c as G,u as ve,k as V,a as O,v as we,d as he,t as ye,f as E,w as be}from"./index.3f5b60fa.js";import{_ as Pe}from"./preload-helper.a4192956.js";import{D as $e,S as Ce,c as I,t as Le,g as ke}from"./index.66160450.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const _e=t=>{const e=new Map;e.set("web",{name:"web"});const r=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},i=(o,c)=>{r.platforms.set(o,c)},s=o=>{r.platforms.has(o)&&(r.currentPlatform=r.platforms.get(o))};return r.addPlatform=i,r.setPlatform=s,r},xe=t=>t.CapacitorPlatforms=_e(t),z=xe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});z.addPlatform;z.setPlatform;var k;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(k||(k={}));class B extends Error{constructor(e,r,i){super(e),this.message=e,this.code=r,this.data=i}}const Oe=t=>{var e,r;return t!=null&&t.androidBridge?"android":!((r=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},Ee=t=>{var e,r,i,s,o;const c=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},l=n.Plugins=n.Plugins||{},a=t.CapacitorPlatforms,p=()=>c!==null?c.name:Oe(t),P=((e=a==null?void 0:a.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||p,T=()=>P()!=="web",Y=((r=a==null?void 0:a.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||T,Z=d=>{const u=U.get(d);return!!(u!=null&&u.platforms.has(P())||H(d))},ee=((i=a==null?void 0:a.currentPlatform)===null||i===void 0?void 0:i.isPluginAvailable)||Z,te=d=>{var u;return(u=n.PluginHeaders)===null||u===void 0?void 0:u.find($=>$.name===d)},H=((s=a==null?void 0:a.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||te,re=d=>t.console.error(d),ne=(d,u,$)=>Promise.reject(`${$} does not have an implementation of "${u}".`),U=new Map,se=(d,u={})=>{const $=U.get(d);if($)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),$.proxy;const b=P(),C=H(d);let w;const oe=async()=>(!w&&b in u?w=typeof u[b]=="function"?w=await u[b]():w=u[b]:c!==null&&!w&&"web"in u&&(w=typeof u.web=="function"?w=await u.web():w=u.web),w),ie=(f,m)=>{var v,h;if(C){const y=C==null?void 0:C.methods.find(g=>m===g.name);if(y)return y.rtype==="promise"?g=>n.nativePromise(d,m.toString(),g):(g,_)=>n.nativeCallback(d,m.toString(),g,_);if(f)return(v=f[m])===null||v===void 0?void 0:v.bind(f)}else{if(f)return(h=f[m])===null||h===void 0?void 0:h.bind(f);throw new B(`"${d}" plugin is not implemented on ${b}`,k.Unimplemented)}},j=f=>{let m;const v=(...h)=>{const y=oe().then(g=>{const _=ie(g,f);if(_){const x=_(...h);return m=x==null?void 0:x.remove,x}else throw new B(`"${d}.${f}()" is not implemented on ${b}`,k.Unimplemented)});return f==="addListener"&&(y.remove=async()=>m()),y};return v.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(v,"name",{value:f,writable:!1,configurable:!1}),v},M=j("addListener"),R=j("removeListener"),ce=(f,m)=>{const v=M({eventName:f},m),h=async()=>{const g=await v;R({eventName:f,callbackId:g},m)},y=new Promise(g=>v.then(()=>g({remove:h})));return y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await h()},y},A=new Proxy({},{get(f,m){switch(m){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?ce:M;case"removeListener":return R;default:return j(m)}}});return l[d]=A,U.set(d,{name:d,proxy:A,platforms:new Set([...Object.keys(u),...C?[b]:[]])}),A},ae=((o=a==null?void 0:a.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||se;return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=P,n.handleError=re,n.isNativePlatform=Y,n.isPluginAvailable=ee,n.pluginMethodNoop=ne,n.registerPlugin=ae,n.Exception=B,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n.platform=n.getPlatform(),n.isNative=n.isNativePlatform(),n},Se=t=>t.Capacitor=Ee(t),S=Se(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),D=S.registerPlugin;S.Plugins;class Q{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const o=async()=>this.removeListener(e,r),c=Promise.resolve({remove:o});return Object.defineProperty(c,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()}}),c}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,r){const i=this.listeners[e];i&&i.forEach(s=>s(r))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:i=>{this.notifyListeners(r,i)}}}unimplemented(e="not implemented"){return new S.Exception(e,k.Unimplemented)}unavailable(e="not available"){return new S.Exception(e,k.Unavailable)}async removeListener(e,r){const i=this.listeners[e];if(!i)return;const s=i.indexOf(r);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const J=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),X=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Te extends Q{async getCookies(){const e=document.cookie,r={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,o]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=X(s).trim(),o=X(o).trim(),r[s]=o}),r}async setCookie(e){try{const r=J(e.key),i=J(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${i||""}${s}; path=${o}; ${c};`}catch(r){return Promise.reject(r)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}D("CapacitorCookies",{web:()=>new Te});const Ue=async t=>new Promise((e,r)=>{const i=new FileReader;i.onload=()=>{const s=i.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>r(s),i.readAsDataURL(t)}),je=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,o,c)=>(s[o]=t[e[c]],s),{})},Ae=(t,e=!0)=>t?Object.entries(t).reduce((i,s)=>{const[o,c]=s;let n,l;return Array.isArray(c)?(l="",c.forEach(a=>{n=e?encodeURIComponent(a):a,l+=`${o}=${n}&`}),l.slice(0,-1)):(n=e?encodeURIComponent(c):c,l=`${o}=${n}`),`${i}&${l}`},"").substr(1):null,Ie=(t,e={})=>{const r=Object.assign({method:t.method||"GET",headers:t.headers},e),s=je(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,n]of Object.entries(t.data||{}))o.set(c,n);r.body=o.toString()}else if(s.includes("multipart/form-data")){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((n,l)=>{o.append(l,n)});else for(const n of Object.keys(t.data))o.append(n,t.data[n]);r.body=o;const c=new Headers(r.headers);c.delete("content-type"),r.headers=c}else(s.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r};class Be extends Q{async request(e){const r=Ie(e,e.webFetchExtra),i=Ae(e.params,e.shouldEncodeUrlParams),s=i?`${e.url}?${i}`:e.url,o=await fetch(s,r),c=o.headers.get("content-type")||"";let{responseType:n="text"}=o.ok?e:{};c.includes("application/json")&&(n="json");let l,a;switch(n){case"arraybuffer":case"blob":a=await o.blob(),l=await Ue(a);break;case"json":l=await o.json();break;case"document":case"text":default:l=await o.text()}const p={};return o.headers.forEach((P,T)=>{p[T]=P}),{data:l,headers:p,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}D("CapacitorHttp",{web:()=>new Be});const De={FRONT:"front",BACK:"back"},L=D("BarcodeScanner",{web:()=>Pe(()=>import("./web.e9c7f7c7.js"),[],import.meta.url).then(t=>new t.BarcodeScannerWeb)}),He=""+new URL("../assets/ioxio-tag-example.98598cfc.png",import.meta.url).href;function Me(t){let e,r=`<div class="relative barcode-scanner-area svelte-1sfyu1w"><img alt="subtract" class="subtract-image svelte-1sfyu1w" src="${Ce}"/> <div class="square surround-cover svelte-1sfyu1w"></div></div> <div class="relative"><p class="description svelte-1sfyu1w">Scan a Product Passport QR code to view product data</p></div>`,i,s,o=`<div class="example-description svelte-1sfyu1w">Here&#39;s an example to identify an <strong>IOXIO Tag</strong></div> <div class="example-code svelte-1sfyu1w"><img src="${He}" alt="An example IOXIO Tag" class="svelte-1sfyu1w"/></div>`,c,n,l;return n=new $e({}),{c(){e=q("div"),e.innerHTML=r,i=W(),s=q("div"),s.innerHTML=o,c=W(),pe(n.$$.fragment),this.h()},l(a){e=K(a,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1q6g2dr"&&(e.innerHTML=r),i=G(a),s=K(a,"DIV",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-fcavfq"&&(s.innerHTML=o),c=G(a),ve(n.$$.fragment,a),this.h()},h(){V(e,"class","relative barcode-scanner-area-wrapper svelte-1sfyu1w"),V(s,"class","relative example-code-wrapper svelte-1sfyu1w")},m(a,p){O(a,e,p),O(a,i,p),O(a,s,p),O(a,c,p),we(n,a,p),l=!0},p:de,i(a){l||(he(n.$$.fragment,a),l=!0)},o(a){ye(n.$$.fragment,a),l=!1},d(a){a&&(E(e),E(i),E(s),E(c)),be(n,a)}}}function N(t){return new Promise(e=>setTimeout(e,t))}function Re(t,e,r){const i=typeof document<"u"?document.body.style.background:"";function s(){L.hideBackground(),document.body.style.background="transparent"}function o(){L.showBackground(),document.body.style.background=i}async function c(){const n=await L.checkPermission({force:!0});if(!n.granted){if(await navigator.mediaDevices.getUserMedia({video:!0}),n.neverAsked)return await c();throw I(`Did not get camera permission, ${JSON.stringify(n)}`,"warn"),new Error(`Did not get camera permission, ${JSON.stringify(n)}`)}s();const l=await L.startScan({cameraDirection:De.BACK});if(l.hasContent){const a=await Le(l.content);a?(I("Detected IOXIO Tag"),L.stopScan().then(()=>{}),ke(`/q/${a.iss}/${a.product}/${a.id}`)):(I("No IOXIO Tag detected","warn"),o())}}return ue(()=>{c()}),fe(()=>{L.stopScan()}),[s,o,N,c]}class Ge extends me{constructor(e){super(),ge(this,e,Re,Me,le,{hideBackground:0,showBackground:1,sleep:2,startScan:3})}get hideBackground(){return this.$$.ctx[0]}get showBackground(){return this.$$.ctx[1]}get sleep(){return N}get startScan(){return this.$$.ctx[3]}}export{De as C,Ge as P,Q as W};
